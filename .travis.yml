language: node_js
node_js:
- '10'
before_install:
- composer config --global github-oauth.github.com "$GITHUB_TOKEN"
- MESSAGE=$(git log --format=%B -n 1 $TRAVIS_COMMIT)
- echo $TRAVIS_COMMIT
- echo ${MESSAGE}
install:
- yarn
test: true
script:
- yarn docs:build
cache: yarn
after_success:
- MESSAGE=$(git log --format=%B -n 1 $TRAVIS_COMMIT)
- cd dist
- cp index.html 404.html
- git init
- git remote add origin https://rihuachen:$GITHUB_TOKEN@github.com/rihuachen/rihuachen.github.io.git
- git add --all
- git commit -m "${MESSAGE}"
- git push origin master -f
# env:
#   global:
#     secure: C2wTJJ4p9q819GUEm/PLLlpL2CwkZujKD1WgHwnMxtBSHfSZU3hvHXmpb3Ja8GC+16y8UhWHlt4g53AHl/sbWPjlHd/CNRfpCH6Ry1IhUtxSqGlRo0tahcz7GLSDhgq5tJMDqUzitI9GCgSiVtCpPofQgiVpKvb+8zOYQ255G9N4wq0tVT+AJpBESFvSkyH5E1YV0uCULPyhjU1NHO7uH8VkcNwJRH0mLsmu+BAlb5Yj0EdtsKOYJXU75IIzculjX5MwQhhGlD2Nch104YJnZC89ctI3uTE3veT5f3EYN6WJCnaSrAaKHVt5b19HprnXEgbkGBn29RtfbtcBgOYSn3ME+Z9M4VLCShVVx4HxG7pLy0hA1p7EIVJOZrIwLZ9TcSxf/9s0CYu0unu1X/sgbou77PsZaTwmab7MNJPwB6i9DP3RnHucWJEn+iDPORMHThyRuTuFuXD4TzKuI2dDYGmOU0qAVXSpG3hL/leI82Duw0wrUmMLjyN3o1YyFuhRsAzeXEIWYQo25N8cmTC0ZMViP4lG2M6EWFvVviID4sXW5QQsPPUqV53y/EHG6DaUnLoFzwImRH3sVCGpEshcCZqDb6i2OUeYuMQ2f1/j359Y5NjF1jFoqJqKfQ+YFX4PNg+mL/Mn5cIkS7Hqgr31xHQBnmepo8dgLuPUc7OR6vA=
