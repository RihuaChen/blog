language: node_js
node_js:
- '10'
before_install:
- MESSAGE=$(git log --format=%B -n 1 $TRAVIS_COMMIT)
- echo $TRAVIS_COMMIT
- echo ${MESSAGE}
install:
- yarn
test: true
script:
- yarn docs:build
cache: yarn
after_success:
- MESSAGE=$(git log --format=%B -n 1 $TRAVIS_COMMIT)
- cd dist
- cp index.html 404.html
- git init
- git remote add origin https://rihuachen:${GITHUB_TOKEN}@github.com/rihuachen/rihuachen.github.io.git
- git add --all
- git commit -m "${MESSAGE}"
- git push origin master -f
env:
  global:
    secure: sVTaUELkn0g/GfEfdbEEgQlexVgrYsv6oIQPeXgRsIgjpVy5+hi32kvpGIyMiFdEexkCyg5bFFLgABVPQmyOGYxFUO/v15x2S/osqWEK+MbQ/mx8/Z7wpi7cgXMkmuueVZmfwDXPQdtmeYfxQe58F8C1Dk2cZeGNoHj1HEcphUlae/z/01G8V0+aUCRb/AnJY/52QYVb91/Qlk0bQHNItuMnz8oEE9Ps80vANkGC3IRd5gP5Fh0RDAfqR6U3Vbb9FW+JRDbQqgTzNRdMQcpnhzf5FV7PdxPsZkSC2KUOlvGlvFldlfgABiaFTpcBZTB3DFVeL0afy6XX843eOltQhIJUrb5S1VD4nXgMye4yX6mov+WWJ6fHwJ9T/Vrvp5Xb66TlpCJa/d/iaRqZwhf6FPUZP+oTiZeTzUAcga/w8QtGJIreOp6T4RVmLzZF8+2PUp2TPTweuqV9RdDIXXxVAmPWEeZNwi6iTtNsFpChuLU7aGTTCtM0LgSy2/uS99z12Lnw5h2GQUWy0BeBE4pGM3TM8lu+atK38hyCrCf6TS8EIMxqtHP0u6YNTBP1azv5MvoryBh8dUKqCzzg2dpCbdAeMQVB5bGfoVyQ4hMNIwApUKv8Q4vCoKnGvPW8hjAMkGXfZLQB0T+pIjq6ZPnjQnSYybJnt6tFf4I8eJh3Z7c=
