language: node_js
node_js:
- '10'
before_install:
- MESSAGE=$(git log --format=%B -n 1 $TRAVIS_COMMIT)
- echo $TRAVIS_COMMIT
- echo ${MESSAGE}
install:
- yarn
test: true
script:
- yarn docs:build
cache: yarn
after_success:
- MESSAGE=$(git log --format=%B -n 1 $TRAVIS_COMMIT)
- cd dist
- cp index.html 404.html
- sed -i "s/GH_TOKEN:$GH_TOKEN,/''/g" umi.js
deploy:
  provider: pages
  skip_cleanup: true
  github_token: "$GH_TOKEN"
  on:
    branch: master
  repo: RihuaChen/RihuaChen.github.io
  target_branch: master
  local_dir: dist
env:
  global:
    secure: Wxp4Ggq91fbEhu4wbD42HOC76INlAsAPPi63LIk8Gowtd+u3SWGWybQQIrOObgTat/SojqSh1gT0xjRUBmC4Q28zB6eiTmh3j6F3fu2BsdNK5cW0ZmOGTvQmNze1DF8aqfHb5KPrnXT/3wjMiBuKrmzIiDJpvZTBowx071Jixcg/wrf5JmpcXrIrMP9w5brMABPFeWjVGfgauWEymmbg6K1ohusW76fkyJCyWlhNzKUL3VmAiFdC6bdZjru3Flg2R1B1F44+NIbY7wGPa1CmIEBQtx6iLl0ZISEsYQloOdZQsUWnzMJix6deJjbucwNGKv2dMejaZB32uXD5E7TLYO/5DNudbUJG7HaMc21jgSDBqyI/jpeHW0b9e9crMimMd46qG2eXPeXDb3eAy21lDqeuFBhUwPjhKCkQ0IxTZEqOn4G/Ofki9mU0hy5/1gcqLWsD1Tsr3kRAa/WRkxXwHOnYk4sfQNAQu+Ii7rAkvdqbN7QLXjbkwZNlFIfxjpplxxSbNLhJjXgOSulPubTZfcn8PBUYp2RUGJKuHBFYu1kyPyuvYhu4uXdG+xKTir732uPqB0IS+N4uOle7wAx97GklQumRnqVZXSUlNsYQhYsLrn/klO5EnDfC8xWzrM/PL3mXs+0LEwpNTFYL6Wp/kUAVVIwxvavXmtjZBN6d58k=
