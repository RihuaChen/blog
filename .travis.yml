language: node_js
node_js:
  - '10'
before_install:
  - composer config --global github-oauth.github.com "$GITHUB_TOKEN"
  - MESSAGE=$(git log --format=%B -n 1 $TRAVIS_COMMIT)
  - echo $TRAVIS_COMMIT
  - echo ${MESSAGE}
install:
  - yarn
test: true
script:
  - yarn docs:build
cache: yarn
after_success:
  - MESSAGE=$(git log --format=%B -n 1 $TRAVIS_COMMIT)
  - cd dist
  - cp index.html 404.html
  - git init
  - git remote add origin https://rihuachen:$GITHUB_TOKEN@github.com/rihuachen/rihuachen.github.io.git
  - git add --all
  - git commit -m "${MESSAGE}"
  - git push origin master -f
env:
  global:
    - secure: FgFPCe+rQDTRUz32pWQMG9lolviQHM+ki4C+ObAiK9yhhcQVgKkyyv3eNMjzwqldSigNUsBtraKvuORKFT2YxCYqX/enxLuuqCJFuyMi7BVKpBvrxCjLB97JR2DB7UhLrx61EkqNjY/iXLCIur3mZaQsJPtmMP8FTGL2kIBGCrZ1cyRfc9t4Pry6glC514s1PujIzJv+Q8e3t0ARwPWLuU9+ZdY3nc8UPjTcbModfVwvZxly8rnjl0UmS2ZPFvOhvEoc8j8F80Murcycc2L6V27AawJ4/ykEzjJGBFDNAv/3kmERIKwajSR3xEkgLCTVkX6YEjkK7rh+bi5wpgFgFCbQvvmSQuSImaxHMvqV9bBE8YPIhPRs5zq+Qv/g0dbgK2TosoI2AY9Gk7B3LqjSiukNGkE+9OESUDlycJlGjsaPegP1Zxy950SDk18sDf3OdozVfvTWpIiiGPlL14QIlmldoZzLfK+/EdT0/MMKZZHNzJZckJRGgSKW+61xXzPNhIrlTq2+kenFb3nS9kJwQC5PGk51oYj7mxcj2cnvYhimwstUd8FQ/FDv56yYjZA+ZpR1rMU8KlEkfK4DteoNKH+6+nNrNSc416Nw1XeBEHXWCAnE8FH83jSwZEqYm8zJKSSbkrT782gTX2wA9fBeoJs/mZlnHVbHmUD5xC1Lriw=
