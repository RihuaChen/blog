language: node_js
node_js:
- '10'
before_install:
- MESSAGE=$(git log --format=%B -n 1 $TRAVIS_COMMIT)
- echo $TRAVIS_COMMIT
- echo ${MESSAGE}
install:
- yarn
test: true
script:
- yarn docs:build
cache: yarn
after_success:
- MESSAGE=$(git log --format=%B -n 1 $TRAVIS_COMMIT)
- cd dist
- cp index.html 404.html
- git init
- git remote add origin https://rihuachen:${GITHUB_TOKEN}@github.com/rihuachen/rihuachen.github.io.git
- git add --all
- git commit -m "${MESSAGE}"
- git push origin master -f
env:
  global:
    secure: qImTycpslIyfH/C40tIpEApZqwcsEeU3R7NjDytcXXLWLzcRQ9xgqjVVIVv9x6F0S1kNvY5gVA3WPDdnk13R74FUl3rzPjvoJYw8PAroJj4h/CsOKriPsqVnwvccnncsWnsNzgvz5kcz4qR6BlfzdkLxNeLnW2tVTiWJxy6ignughhxFMmOv9TjC3jYkMc4VRT2BQcG1dfuESxFWbxynUk/6beo0uMFk1vixlZidbbfBfmymdrQlgojiId3LjT25CHPtVLatpYUAk3xKsRY1rvZIyB9tIND+dEf7i4E1mMmjwB53GEqt+KuPfI2NUkGR/5NHGARGZ8N5yCpZMLAAoum8OLzkSf4NPYyqEfB3p/SLM/TC726U2fLpkRQB9fOyQgZyUslo0opCI2vPUEWy/l7EjG2Ytrutl1GYogF5KObtxcq2IFQirl5mZR4UksA4FqHqym48U6yqQirv+ehI1zRA+dHZHQfgb0Lx9aM8x07Jpqi/hXlChC478EDbN3DeWZK9bkxGdG26adAJgu439wKqKRv48ALNanhpgLO7C2nzEVi9Tb5+RFnOxyOg3tcddnxz2Ml+7hV3cfCJS1+4IhglFBFyTu5KqfF2N5f8Mfenwck+5L7lAALvbcHDIQMv16Hhq+El+/AgmVT9PwNgEJZBel3Rg0BScarYy76/Xxg=
